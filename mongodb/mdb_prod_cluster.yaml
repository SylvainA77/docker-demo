rs1a:
  extends:
    file: mdb_dev_cluster.yaml
    service: rs1a
  image: mongo:3.0.4
  environment:
    - "affinity:com.docker.examples.mongodb.role!=mongod"
    - "affinity:com.docker.examples.mongodb.role!=app"
    - "constraint:node!=mongodb-swarm"

rs1b:
  extends:
    file: mdb_dev_cluster.yaml
    service: rs1b
  image: mongo:3.0.4
  environment:
    - "affinity:com.docker.examples.mongodb.role!=mongod"
    - "affinity:com.docker.examples.mongodb.role!=app"
    - "constraint:node!=mongodb-swarm"

rs1c:
  extends:
    file: mdb_dev_cluster.yaml
    service: rs1c
  image: mongo:3.0.4
  environment:
    - "affinity:com.docker.examples.mongodb.role!=mongod"
    - "affinity:com.docker.examples.mongodb.role!=app"
    - "constraint:node!=mongodb-swarm"


rs2a:
  extends:
    file: mdb_dev_cluster.yaml
    service: rs2a
  image: mongo:3.0.4
  environment:
    - "affinity:com.docker.examples.mongodb.role!=mongod"
    - "affinity:com.docker.examples.mongodb.role!=app"
    - "constraint:node!=mongodb-swarm"

rs2b:
  extends:
    file: mdb_dev_cluster.yaml
    service: rs2b
  image: mongo:3.0.4
  environment:
    - "affinity:com.docker.examples.mongodb.mongod!=true"
    - "affinity:com.docker.examples.mongodb.app!=true"
    - "constraint:node!=mongodb-swarm"

rs2c:
  extends:
    file: mdb_dev_cluster.yaml
    service: rs2c
  image: mongo:3.0.4
  environment:
    - "affinity:com.docker.examples.mongodb.role!=mongod"
    - "affinity:com.docker.examples.mongodb.role!=app"
    - "constraint:node!=mongodb-swarm"

config1:
  extends:
    file: mdb_dev_cluster.yaml
    service: config1
  image: mongo:3.0.4
  environment:
    - "affinity:com.docker.examples.mongodb.role!=mongod"
    - "affinity:com.docker.examples.mongodb.role!=app"
    - "constraint:node!=mongodb-swarm"

config2:
  extends:
    file: mdb_dev_cluster.yaml
    service: config2
  image: mongo:3.0.4
  environment:
    - "affinity:com.docker.examples.mongodb.role!=mongod"
    - "affinity:com.docker.examples.mongodb.role!=app"
    - "constraint:node!=mongodb-swarm"

config3:
  extends:
    file: mdb_dev_cluster.yaml
    service: config3
  image: mongo:3.0.4
  environment:
    - "affinity:com.docker.examples.mongodb.role!=mongod"
    - "affinity:com.docker.examples.mongodb.role!=app"
    - "constraint:node!=mongodb-swarm"
